<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.lineicons.com/2.0/LineIcons.css">
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">

    <title>Zonas</title>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

  <script>

  var script_url = "https://script.google.com/macros/s/AKfycbxFRlp_FHwrNkQg6VJ7T9nh4UZUVaiIyNm7Qqy9R_BNMrULwOs/exec";

  // print the returned data
  function ctrlq(e) {


	$("#re").html(e.result);
	$("#re").css("visibility","visible");
	read_value();
  }




function read_value() {

$("#re").css("visibility","hidden");

   document.getElementById("loader").style.visibility = "visible";
   
 var url = script_url+"?action=read";

$.getJSON(url, function (json) {

  let divcontainer = document.createElement("div");
  divcontainer.className="container";

  let rowDivContainer = document.createElement("div");
  rowDivContainer.className="row justify-content-center";
  divcontainer.appendChild(rowDivContainer);

  var abecedario = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];

  var cantParejas = json.records[json.records.length-2].POSICION;

  var cantZonas =  Math.trunc(cantParejas/3);

  var cont = 0;

  var cantZonasCuatro = json.records[json.records.length-2].POSICION - (cantZonas*3);



  for(var i = 1; i < cantZonas+1; i++){ 

    let colDivContainer = document.createElement("div");
    colDivContainer.className = "col-md-4 Zonas";
    rowDivContainer.appendChild(colDivContainer);

    let nombreZona = document.createElement("p");
    nombreZona.textContent = "Zona " + abecedario[cont] + " Mesa " + (cont+1);
    nombreZona.align="center";
    cont++;
    colDivContainer.appendChild(nombreZona);
    if( i < cantZonas + 1 - cantZonasCuatro ){

      for(var j=0; j < 3; j++){

        if(j==0){
          a = i*2 - 2;
        }
        else if(j==1){
          a = (cantZonas*4) - 2*i ;
        }
        else{
          a = (cantZonas * 4) - 2 + (2*i);
        }

        let parejaZona = document.createElement("div");
        parejaZona.className = "parejaZona";
        colDivContainer.appendChild(parejaZona);

        let nombre1 = document.createElement("p");
        nombre1.id = "nombre1";
        nombre1.textContent = json.records[a].NOMBRES;
        parejaZona.appendChild(nombre1);

        let nombre2 = document.createElement("p");
        nombre2.id = "nombre2";
        nombre2.textContent = json.records[a+1].NOMBRES;
        parejaZona.appendChild(nombre2);


        let divisiones = document.createElement("div");
        divisiones.className = "divisionesZona";
        parejaZona.appendChild(divisiones);

        let div1 = document.createElement("img");
        div1.className="categoriauno";
        if(json.records[a].PUNTAJETMT > 1199){
          div1.src="images/icono_puesto_1ra.gif";
        }
        if(json.records[a].PUNTAJETMT > 999 & json.records[a].PUNTAJETMT <1200){
          div1.src="images/icono_puesto_2da.gif";
        }
        if(json.records[a].PUNTAJETMT > 799 & json.records[a].PUNTAJETMT <1000){
          div1.src="images/icono_puesto_3ra.gif";
        }
        if(json.records[a].PUNTAJETMT > 599 & json.records[a].PUNTAJETMT <800){
          div1.src="images/icono_puesto_4ta.gif";
        }
        if(json.records[a].PUNTAJETMT > 399 & json.records[a].PUNTAJETMT <600){
          div1.src="images/icono_puesto_5ta.gif";
        }
        if(json.records[a].PUNTAJETMT > 199 & json.records[a].PUNTAJETMT <400){
          div1.src="images/icono_puesto_6ta.gif";
        }
        if(json.records[a].PUNTAJETMT > -1 & json.records[a].PUNTAJETMT <200){
          div1.src="images/icono_puesto_7ma.gif";
        }
        divisiones.appendChild(div1);

        let div2 = document.createElement("img");
        if(json.records[a+1].PUNTAJETMT > 1199){
          div2.src="images/icono_puesto_1ra.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 999 & json.records[a+1].PUNTAJETMT <1200){
          div2.src="images/icono_puesto_2da.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 799 & json.records[a+1].PUNTAJETMT <1000){
          div2.src="images/icono_puesto_3ra.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 599 & json.records[a+1].PUNTAJETMT <800){
          div2.src="images/icono_puesto_4ta.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 399 & json.records[a+1].PUNTAJETMT <600){
          div2.src="images/icono_puesto_5ta.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 199 & json.records[a+1].PUNTAJETMT <400){
          div2.src="images/icono_puesto_6ta.gif";
        }
        if(json.records[a+1].PUNTAJETMT > -1 & json.records[a+1].PUNTAJETMT <200){
          div2.src="images/icono_puesto_7ma.gif";
        }
        div2.className="categoriados";
        divisiones.appendChild(div2);


        let puntaje = document.createElement("p");
        puntaje.id="puntajePareja"
        puntaje.textContent = json.records[a].SUMAPUNTAJE + " Pts";
        parejaZona.appendChild(puntaje);


      }


    }
    else{

      for(var j=0; j < 4; j++){

        if(j==0){
          a = i*2 - 2;
        }
        else if(j==1){
          a = (cantZonas*4) - 2*i ;
        }
        else if(j==2){
          a = (cantZonas * 4) - 2 + (2*i);
        }
        else{
          a = (cantZonas * 8) - (2*i);
        }

        let parejaZona = document.createElement("div");
        parejaZona.className = "parejaZona";
        colDivContainer.appendChild(parejaZona);

        let nombre1 = document.createElement("p");
        nombre1.id = "nombre1";
        nombre1.textContent = json.records[a].NOMBRES;
        parejaZona.appendChild(nombre1);

        let nombre2 = document.createElement("p");
        nombre2.id = "nombre2";
        nombre2.textContent = json.records[a+1].NOMBRES;
        parejaZona.appendChild(nombre2);


        let divisiones = document.createElement("div");
        divisiones.className = "divisionesZona";
        parejaZona.appendChild(divisiones);

        let div1 = document.createElement("img");
        div1.className="categoriauno";
        if(json.records[a].PUNTAJETMT > 1199){
          div1.src="images/icono_puesto_1ra.gif";
        }
        if(json.records[a].PUNTAJETMT > 999 & json.records[a].PUNTAJETMT <1200){
          div1.src="images/icono_puesto_2da.gif";
        }
        if(json.records[a].PUNTAJETMT > 799 & json.records[a].PUNTAJETMT <1000){
          div1.src="images/icono_puesto_3ra.gif";
        }
        if(json.records[a].PUNTAJETMT > 599 & json.records[a].PUNTAJETMT <800){
          div1.src="images/icono_puesto_4ta.gif";
        }
        if(json.records[a].PUNTAJETMT > 399 & json.records[a].PUNTAJETMT <600){
          div1.src="images/icono_puesto_5ta.gif";
        }
        if(json.records[a].PUNTAJETMT > 199 & json.records[a].PUNTAJETMT <400){
          div1.src="images/icono_puesto_6ta.gif";
        }
        if(json.records[a].PUNTAJETMT > -1 & json.records[a].PUNTAJETMT <200){
          div1.src="images/icono_puesto_7ma.gif";
        }
        divisiones.appendChild(div1);

        let div2 = document.createElement("img");
        if(json.records[a+1].PUNTAJETMT > 1199){
          div2.src="images/icono_puesto_1ra.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 999 & json.records[a+1].PUNTAJETMT <1200){
          div2.src="images/icono_puesto_2da.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 799 & json.records[a+1].PUNTAJETMT <1000){
          div2.src="images/icono_puesto_3ra.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 599 & json.records[a+1].PUNTAJETMT <800){
          div2.src="images/icono_puesto_4ta.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 399 & json.records[a+1].PUNTAJETMT <600){
          div2.src="images/icono_puesto_5ta.gif";
        }
        if(json.records[a+1].PUNTAJETMT > 199 & json.records[a+1].PUNTAJETMT <400){
          div2.src="images/icono_puesto_6ta.gif";
        }
        if(json.records[a+1].PUNTAJETMT > -1 & json.records[a+1].PUNTAJETMT <200){
          div2.src="images/icono_puesto_7ma.gif";
        }
        div2.className="categoriados";
        divisiones.appendChild(div2);


        let puntaje = document.createElement("p");
        puntaje.id="puntajePareja"
        puntaje.textContent = json.records[a].SUMAPUNTAJE + " Pts";
        parejaZona.appendChild(puntaje);


      }

    }
    

  }


    

        
        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(divcontainer);
        

		document.getElementById("loader").style.visibility = "hidden";
    document.getElementById("loader").style.display = "none";

		$("#re").css("visibility","visible");
    });
	}

  </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>
<body class="cuerpo">

    <div class="contenedor">
      <div class="rowo">
            <div class="LogoClub text-center">
                <img src="images/Alvear Club TDM.png">
            </div>
            <div class="column-1 text-center">
                <h2>2° Torneo de Parejas Alvear Nittaku</h2>
                <h3>Sembrado de Zonas</h3>
            </div>
      </div>
    </div>

   <!-- Zonas  -->
   <div>

    <p id="re"></p>

    <input id="b1" type="button" onclick="read_value()"class="btn" style="height: 8vh; width: 1vh; font-size: 3vh; margin-bottom: 3vh; display: none; border:1px solid white; color:white;" value="Ver Listado" />
    
    <div id="showData">
    </div>

    <div id="loader" align="center">
      <img src="images/loading.gif" alt="" style="height: 90px; width: 90px;">
      <p style="color: white;">Cargando..</p>
    </div>

  </div>

    <!-- Sponsors  -->
    <div class="container-fluid text-center auspi" style="margin-top: 2vh;">

      <h5 style="color:#b7b7b7;; padding-top: 3vh;">Auspician:</h5>

      <div class="row justify-content-center align-items-center">

        <div class="col-sm-2 text-center">
          <a href="">
            <img class="imgAus" src="images/Goldstein.png" style="" alt="">
          </a>
        </div>
        <div class="col-sm-1 text-center">
          <a href="">
            <img class="imgAus text-center" src="images/Diego Temperley.png" style="" alt="">
          </a>
        </div>
        <div class="col-sm-1 text-center">
            <a href="">
              <img class="imgAus text-center" src="images/Shizen White.png" style="" alt="">
            </a>
        </div>
        <div class="col-sm-1 text-center">
            <a href="">
              <img class="imgAus text-center" src="images/Nittaku.png" style="" alt="">
            </a>
        </div>
        <div class="col-sm-1 text-center">
            <a href="">
              <img class="imgAus text-center" src="images/ARD.png" style="" alt="">
            </a>
        </div>
        <div class="col-sm-1 text-center">
            <a href="">
              <img class="imgAus text-center" src="images/FHM.png" style="" alt="">
            </a>
        </div>

      </div>
    </div>

  <section class="footer">
      <p class="text"><a  href="https://wa.link/4o7d77">Si quiere adquirir el sistema haga click aqui</a></p>
      <p class="text">Diseño y desarrollo por Diego Simon</p>
    </section>

    <script>
      window.onload = function Ejemplo(){
        $("#b1").click();
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.js"></script>

</body>
</html>